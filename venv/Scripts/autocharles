#!D:\Python\first\venv\Scripts\python.exe

import sys,getopt,re
import parser,autocharles

def main(argv):
    # get file arguments
    try:
        (opts, args) = getopt.getopt(argv, 'i:')
    except getopt.GetoptError:
        print 'REQUIRED: autocharles -i <inputfile>'
        sys.exit(2)
    if not opts or '-i' not in opts[0]:
        print 'REQUIRED: autocharles -i <inputfile>'
        sys.exit(2)
    for (opt, arg) in opts:
        if opt == '-i':
            INPUT_FILE = arg
            OUTPUT_FILE = re.search(r'([\w/_-]*)', INPUT_FILE).group(1) + ".csv"
            print 'Input file: ' + INPUT_FILE
            print 'Output file: ' + OUTPUT_FILE
            print ''

    autocharles.parser.parse_session(INPUT_FILE, OUTPUT_FILE)


if __name__ == "__main__":
   main(sys.argv[1:])

